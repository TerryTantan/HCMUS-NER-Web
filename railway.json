{
  "build": {
    "builder": "NIXPACKS",
    "nixpacksConfig": {
      "phases": {
        "setup": {
          "nixPkgs": [
            "python311Full",
            "gcc",
            "pkg-config",
            "zlib",
            "zlib.dev",
            "libffi",
            "libffi.dev",
            "openssl",
            "openssl.dev",
            "freetype",
            "freetype.dev"
          ]
        },
        "install": {
          "cmds": [
            "python3 -m pip install --upgrade pip",
            "python3 -m pip install -r requirements-linux.txt"
          ]
        },
        "start": {
          "cmd": "uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload"
        }
      }
    }
  },
  "deploy": {
    "runtime": "V2",
    "startCommand": "uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload",
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "sleepApplication": false,
    "multiRegionConfig": {
      "asia-southeast1-eqsg3a": {
        "numReplicas": 1
      }
    }
  }
}
